---
import ProjectCard from "@/components/ProjectCard.astro";
import RootLayout from "@/layouts/RootLayout.astro";
import { getCollection } from "astro:content";

let projects = await getCollection("projects");
projects = projects.sort((a, b) => {
  console.log([a.slug, a.data.weight]);
  if ((a.data.weight || 0) > (b.data.weight || 0)) {
    return -1;
  } else if ((a.data.weight || 0) < (b.data.weight || 0)) {
    return 1;
  }
  return 0;
});
---

<RootLayout title="Projects">
  <main
    class="container mx-auto w-full space-y-8 px-4 py-8 lg:max-w-screen-lg lg:space-y-16 lg:py-16"
  >
    <h2 class="text-4xl font-bold text-zinc-600 dark:text-zinc-100">
      Projects
    </h2>

    <div>
      {projects.map((project) => <ProjectCard data={project} />)}
    </div>
  </main>
</RootLayout>
